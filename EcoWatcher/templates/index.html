<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>EcoWatcher - Predict</title>

  <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>

  <a href="/dashboard" class="dashboard-btn">← Volver al Dashboard</a>
<button id="btn-tabla" aria-label="Mostrar tabla de rangos">Mostrar Rangos EcoScore</button>

<dialog id="modal-tabla" aria-labelledby="tabla-title">
  <div class="dialog-inner">
    <h2 id="tabla-title">Rangos EcoScore</h2>

    <table aria-describedby="tabla-title">
      <thead>
        <tr>
          <th>Puntaje EcoScore</th>
          <th>Categoría</th>
        </tr>
      </thead>
      <tbody id="tabla-body">
        <tr>
          <td class="score">0 - 199</td>
          <td><span class="table-label critico">Crítico</span></td>
        </tr>
        <tr>
          <td class="score">200 - 349</td>
          <td><span class="table-label moderado">Moderado</span></td>
        </tr>
        <tr>
          <td class="score">350 - 449</td>
          <td><span class="table-label bueno">Bueno</span></td>
        </tr>
        <tr>
          <td class="score">+450</td>
          <td><span class="table-label excelente">Excelente</span></td>
        </tr>
      </tbody>
    </table>

    <button id="cerrar-tabla" aria-label="Cerrar tabla">Cerrar</button>
  </div>
</dialog>

<script src="{{ url_for('static', filename='js/scripts.js') }}"></script>


  <h1>EcoWatcher — Predecir EcoScore</h1>

  <div class="container">

    <!-- FORMULARIO -->
    <div class="card">
      <h2>Ingresar datos ambientales</h2>

      <form action="{{ url_for('predict') }}" method="post">

        <label>Hectáreas verdes por km²</label>
        <input name="ha_verdes_km2" step="0.01" required>

        <label>% de cobertura arbórea</label>
        <input name="cobertura_arbolado_pct" step="0.01" required>

        <label>PM2.5</label>
        <input name="pm25" step="0.01" required>

        <label>PM10</label>
        <input name="pm10" step="0.01" required>

        <label>Residuos no gestionados</label>
        <input name="residuos_no_gestionados" step="0.001" required>

        <label>% de reciclaje</label>
        <input name="porcentaje_reciclaje" step="0.01" required>

        <label>% de transporte limpio</label>
        <input name="porcentaje_transporte_limpio" step="0.01" required>

        <button type="submit">Predecir EcoScore</button>
      </form>

      {% if prediction is defined %}
      <h2>EcoScore: {{ prediction }} / 500</h2>
      <h3>Categoría: {{ category }}</h3>
      {% endif %}
    </div>

    <!-- PANEL DE RECOMENDACIONES -->
    <div class="side-panel">
      <h2>Recomendaciones</h2>

      {% if recomendaciones %}
      {% for r in recomendaciones %}
      <div class="recomendacion {{ r.clase }}">
        {{ r.texto }}
      </div>
      {% endfor %}
      {% else %}
      <p style="color:#666;">Aquí aparecerán recomendaciones cuando envíes el formulario.</p>
      {% endif %}
    </div>

  </div>

</body>

</html>